
    :root { --border:#e5e7eb; --muted:#6b7280; --ink:#111827; --bg:#fff; }
    body { font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", Arial, sans-serif; margin:16px; color:var(--ink); background:var(--bg); }
    .card { border:1px solid var(--border); border-radius:12px; padding:16px; margin-bottom:16px; background:#fff; }
    .btn { background:var(--ink); color:#fff; padding:10px 14px; border-radius:8px; border:none; cursor:pointer; }
    .btn.secondary { background:#374151; }
    .btn.ghost { background:#fff; color:var(--ink); border:1px solid var(--border); }
    .btn:disabled { opacity:.5; cursor:not-allowed; }
    .btn-group { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
    label { font-weight:700; display:block; margin-bottom:6px; }
    /* SAFER HIDE (iOS/WebView friendly): do not use display:none for file inputs */
input[type="file"]{
  position: fixed !important;
  left: -9999px !important;
  top: auto !important;
  width: 1px !important;
  height: 1px !important;
  opacity: 0 !important;
  overflow: hidden !important;
}
    .muted { color:var(--muted); font-size:12px; }
    .error { color:#b91c1c; font-weight:700; white-space:pre-wrap; }
    .metrics { display:flex; gap:12px; flex-wrap:wrap; margin:8px 0; }
    .metric { border:1px solid var(--border); border-radius:10px; padding:8px 12px; background:#fafafa; }
    .kpi-strong { font-weight:800; font-size:16px; }
    /* tabs */
    .tabs { display:flex; gap:8px; margin:12px 0; border-bottom:1px solid var(--border); flex-wrap:wrap; }
    .tab { padding:10px 12px; border:1px solid var(--border); border-bottom:none; border-radius:8px 8px 0 0; background:#f9fafb; cursor:pointer; }
    .tab.active { background:#fff; font-weight:700; }
    .tabcontent { display:none; }
    .tabcontent.active { display:block; }
    table { width:100%; border-collapse:collapse; font-size:14px; }
    th, td { border-bottom:1px solid #eee; padding:6px 8px; text-align:left; }
    .diag { margin-top:8px; padding:8px 10px; border:1px dashed var(--border); border-radius:8px; background:#fafafa; }
    .fname { font-size:12px; padding:4px 8px; border:1px solid var(--border); border-radius:6px; background:#fafafa; }
    .fileline { display:flex; align-items:center; gap:8px; }
    .form-row { display:flex; gap:12px; flex-wrap:wrap; align-items:end; margin-bottom:12px; }
    .form-row > div { display:flex; flex-direction:column; gap:6px; }
    select, input[type="date"], input[type="text"] { padding:8px 10px; border:1px solid var(--border); border-radius:8px; min-width:160px; }
    .badge { display:inline-block; padding:2px 8px; border:1px solid var(--border); border-radius:999px; font-size:12px; background:#fafafa; }

    /* --- モーダル --- */
    .modal { display:none; position:fixed; inset:0; background:rgba(0,0,0,.4); z-index:1000; }
    .modal .dialog { background:#fff; width:min(720px, 92vw); margin:10vh auto; border-radius:12px; padding:16px 18px; border:1px solid var(--border); }
    .modal .close { float:right; cursor:pointer; font-weight:900; font-size:20px; padding:2px 8px; border-radius:8px; }
    .info-btn { border:1px solid var(--border); background:#fff; color:#111; border-radius:999px; width:28px; height:28px; display:inline-flex; align-items:center; justify-content:center; cursor:pointer; font-weight:800; }
    .info-btn:hover { background:#f3f4f6; }
    .hstack { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
    .grid2 { display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    @media (max-width: 900px){ .grid2 { grid-template-columns: 1fr; } }

    /* --- セグメント分析（レイアウト） --- */
    .seg-checks { display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .seg-checks label { font-weight:500; margin:0; }
    .seg-card { display:grid; grid-template-columns: 1fr; gap:12px; }
    @media (min-width: 1000px){ .seg-card { grid-template-columns: 1fr 1fr; } }
  